<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= docTitle %></title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/fontawesome/css/all.min.css" />

<link rel="stylesheet" href="/css/form.css">


</head>
<body>
    <div class="backdrop"></div>
    <header class="main-header">
    <div class="brand__nav" data-testid="navbar-brand">
        <span>Shortlink</span>
        <i class="fa-solid fa-link"></i>
    </div>
    <i class="fa-solid fa-bars" id="side-menu-toggle" data-testid="navber-toggle"></i>
    <nav class="main-header__nav">
        <ul class="main-header__item-list">
            <% if (!isAuthenticated) { %>
            <li class="main-header__item">
                <a href="/login" class="<%= path === '/login' ? 'active' : '' %>">Login</a>
            </li>
            <li class="main-header__item">
                <a href="/signup" class="<%= path === '/signup' ? 'active' : '' %>">Signup</a>
            </li>
            <% } else { %>
            <li class="main-header__item">
                <form action="/logout" method="POST">
                    <button type="submit" class="<%= path === '/logout' ? 'active' : '' %>">Logout</button>
                </form>
            </li>
            <% } %>
        </ul>
    </nav>
    </header>
    <nav class="mobile-nav">
        <ul class="mobile-nav__item-list">
            <% if (!isAuthenticated) { %>
                <li class="mobile-nav__item">
                    <a href="/login" class="<%= path === '/login' ? 'active' : '' %>">Login</a>
                </li>
                <li class="mobile-nav__item">
                    <a href="/signup" class="<%= path === '/signup' ? 'active' : '' %>">Signup</a>
                </li>
            <% } else { %>
            <li class="mobile-nav__item">
                <form action="/logout" method="POST">
                    <button type="submit" class="<%= path === '/logout' ? 'active' : '' %>">Logout</button>
                </form>
            </li>
            <% } %>
        </ul>
        
    </nav>
        <main>
        <form class='auth-form' method="POST" action="/<%= mode === 'login' ? 'login' : 'signup' %>" 
            novalidate>
            <% if(errorMsg) { %>
            <p class="user-message user-message--error"><%= errorMsg %></p>
            <% } %>
            <% if(mode === 'signup') { %>
            <p>
                <div class="form-control">
                    <label for="fullName">Full Name</label>
                    <input 
                    class="<%= validationErrors.find(e => e.path === 'fullName') ? 'invalid' : '' %>"
                    type="text" 
                    name="fullName" 
                    id="fullName" 
                    value="<%= oldInput.fullName %>"/>
                </div>
            </p>
            <% } %>
            <p>
                <div class="form-control">
                    <label for="email">Email</label>
                    <input 
                    class="<%= validationErrors.find(e => e.path === 'email') ? 'invalid' : '' %>"
                    type="email" 
                    name="email" 
                    id="email" 
                    value="<%= oldInput.email %>"/>
                </div>
            </p>
            <p>
                <div class="form-control">
                    <label for="password">Password</label>
                    <input 
                    class="<%= validationErrors.find(e => e.path === 'password') ? 'invalid' : '' %>"
                    type="password" 
                    name="password" 
                    id="password" 
                    value="<%= oldInput.password %>"/>
                </div>
            </p>
            <% if(mode === 'signup') { %>
            <p>
                <div class="form-control">
                    <label for="c_password">Confirm Password</label>
                    <input 
                    class="<%= validationErrors.find(e => e.path === 'c_password') ? 'invalid' : '' %>"
                    type="password" 
                    name="c_password" 
                    id="c_password" 
                    value="<%= oldInput.confirmPassword %>"/>
                </div>
            </p>
            <% } %>
            <div class="action">

                <button type="submit"><%= mode === 'signup' ? 'SIGN UP' : 'LOG IN' %></button>
            </div>
        </form>
    </main>
    <script src="/js/main.js">

    </script>
    </body>
    </html>
